
const sampleInput =
`#.##..##.
..#.##.#.
##......#
##......#
..#.##.#.
..##..##.
#.#.##.#.

#...##..#
#....#..#
..##..###
#####.##.
#####.##.
..##..###
#....#..#`;

const realInput =
`.#..#..
.##.###
..####.
##.##.#
#.####.
#.#.##.
##.##.#
..####.
.##.###
.#..#..
##.....
#.###.#
##.....
##.....
#.###.#

...#...####...#..
.....##.##.##....
##....######....#
..#.##.#..#.##...
##.###.####.###.#
..###...##...###.
#####.##..##.####
#######....######
###...#.##.#...##
....###.##.###...
##.####.##.####.#
..###...##...###.
##.#.##....##.#.#
##..#.#....#.#..#
##.###.#..#.###.#
###.#...##...#.##
..####.####.####.

.#..#..#.##.#
........#.##.
#....###....#
######..####.
.####.###..##
##..##.......
.#..#..#.##.#
#.##.#..#..#.
##..##.######
#....##.#..#.
..##.........

..#####.###.##.##
.....##...#....#.
#####..#.###..###
####..#.##......#
#####..#.........
#.###.....#.##.#.
##.######.......#
####.#..##.####.#
##......#.#.##.#.
....#.##.#.####.#
.#...#..#...##...
#..#.#.##.##..##.
#..#.#.##.##..##.
.#...#..#...##...
....#.##.#.####.#

..##..##.#...#.##
..##..#......##.#
#.##.##..#..#.#.#
.#..#....#####.#.
######.#...#.##.#
#....#.......#...
.#..#.#####.#..##
#.##.###.#.##..#.
.#..#..##....#.#.
#######..###..##.
#######...##..##.

##......#..#...
.###.#.#.##.#.#
.#.##.########.
.###.#.#....#.#
#...#....##....
.#..#......#...
.##..#.#....#.#
####..#..##..#.
.#.#.##########
.#.##..######..
##..#.##....##.
##..#.##....##.
.#.##..######..
.#.#.##########
####..#..##..#.

#..#.#.###..#.#.#
#.#..##.#.#####.#
####.#####.#.....
####.#####.#.....
#.#..##.#.#####.#
#..###.###..#.#.#
..#.#.#.....##.##
.#.#..##.##..##..
.#.#..##.##..##..

###...##...
.#..##..##.
.#....##...
#.##..##..#
#.#........
....#.##.#.
....#.##.#.
#.#........
#..#..##..#

..##..#
##..##.
##..##.
..##..#
.#..#..
.##....
#.###.#
#..##.#
#..##.#
#####.#
.##....

.......#..##..#
###.#..#..##..#
####.####....##
.###..###.##.##
###...#.##..##.
....#..###..###
##.#.##........
.#.#..#.#.##.#.
.##.#...#.####.
...#.##.#.##.#.
##.#..#.######.
.#..#.#.######.
.#.##.####..###
.#.##.####..###
.#..#.#.######.

####.##..##.#
##.#........#
#.#....##....
.#..#.#..#.#.
##.##......##
......####...
...###.##.###
#..##.#..#.##
###...#..#...
#...###..###.
#.#..........
#...#......#.
....#......#.

........#..
.######.##.
##....###..
##....###..
.######.##.
........#..
##....##..#
#.......#..
########...
#..##..####
.#.##.#..##
#.####.####
..#..#.....
.######.###
...##...#..

.##..#.
.##....
##.#.##
##.#.##
.##....
.##..#.
.##..##
##.#.#.
.##.###
#..#.##
###.#..
.#..##.
##.###.
###.#..
###...#

....#..####..
...#..#....#.
##..#.#.##.#.
###..##.##.##
..###...##...
##.#....##...
##...##.##.##
..#.#..#..#..
###..#......#
..###..#..#..
..###.#####..

......####.......
#..###....###.###
.##..##..##..##..
.#..###..###..#..
...#.#....#.#....
.#.##.#..#.##.#..
####.######.#####
##....#..#....###
.####..##..####..

......###..
..##..#.###
#.##.###..#
.......#...
.####.#.###
.####.#....
....#.#.##.
.#..#.###.#
.####....#.
......####.
......####.

#.....#
.#.###.
....###
....###
.#..##.
#.....#
##..##.
###.###
###.###

.##.##.##..#...#.
....#...#..##..##
#....####...#....
#...##..#.##...##
..##....#.#####.#
....###.###.#.#.#
#.#.#.#..#.##.###
##.#..##.#...##.#
##.#..##.#...##.#
#.#.#.#..#.##.###
....###.###.#.#.#
..##....#.#####.#
#.#.##..#.##...##
#....####...#....
....#...#..##..##
.##.##.##..#...#.
.##.##.##..#...#.

...#..##.########
...#...#.########
#...#.#######..#.
.####.#.#..#...#.
.#.#.###.....#.##
..##.#.#.#..##...
..##.#.#.#..##...
.#.#.###.....#.##
.####.#.#..#...#.

#..#....#
.##...#.#
#..##.###
......#.#
#..#.#..#
####...##
####...##
#..#.#..#
....#.#.#
#..##.###
.##...#.#
#..#....#
.....#.#.

..##..##....#
.##....##..##
#.##..##.##.#
....##.......
##.#....####.
..##..##....#
.#.#..#.#..#.

..#......
######...
##.#..##.
..#.##..#
..#...##.
##.##....
####.#..#
##...####
...##.##.
...##....
..##..##.

######...####.##.
######...####.##.
##.#..#..##...##.
.........###.#..#
...#.##.#.##.####
#.#........###..#
#...##.#..#..#..#
#....##.####.....
.#....#####.#....
.#####...#.####.#
#..#.......#..##.
..###.##.###..##.
#.##....#.###....

#.##.#..##.##.#.#
#....##...#..#.##
..##..#.###......
..##..#..#...##..
##..##..#...##...
.........#.....##
#....#.#...##....

.#...##...#..
..##.##.##...
.#.##..##.#..
.#..####..#..
.#.#....#.#.#
#.#..##..#.##
...######....
#...#..#...##
#.#.####.#.##
###.####.####
####....#####

##.#.#...
.##.##...
#..###.##
##.##.#..
.###.####
...#..##.
...#..##.
.###.####
##.##.#..
#..###.##
.##.##...
##.#.#...
.#.#.#...

###.#...##...#..#
..#..###.##.###.#
.##..###.##.###.#
###.#...##...#..#
....#..##...##...
#...#..#.####...#
#...#..#.####...#
....#..##...##...
###.#...##...#..#
.##..###.##.###.#
..#..###.##.###.#
###.#...##...#..#
.#.###...#.....##
.....##.##...#.#.
.#.#.###..##..#.#

###########.##.##
..##..####..##..#
#....#..###....##
..##..##.##...###
.####..##########
#######..#..##..#
.####.###.#.##.#.

#..##...#.#....
#..#.##..#.####
.####..#.##.##.
..#.##.#####..#
####....##.####
##.#....##.####
..#.##.#####..#
.####..#.##.##.
#..#.##..#.####
#..##...#.#....
##.#.....######

..........#..#.
#.#..#.#......#
###..######..##
#.####.#..####.
#......##......
#.####.#.#....#
.######.##.##.#
#..##..#.##..##
..#..#...#....#
..####...##..##
..####...#....#
#......##......
##....####.##.#
#.####.##.####.
.##..##....##..

#.####.#.#.
..####.#.#.
#.......#.#
..###...##.
##.....#..#
##.....#..#
..###...##.
#.......#.#
..####.#.#.
#.####.#.#.
#.####...#.
##..##.....
##.##.##.##

######.######.###
..##..#......#..#
.####.########.##
#....##.#..#.##..
##..##.#.##.#.##.
##..##.#....#.##.
........####.....
.......######....
#....#.......##..
......##.##.##...
.####..#.##.#..##

...##.#
###....
###..#.
##.#.##
##.####
..##.#.
##..###
###.#.#
#####.#
##..###
..##.#.
##.####
##.#.##
###..#.
###....
...##.#
###.#.#

#..##......
########...
#..#.#..#.#
.#..##..###
###.#...#..
#..##.#....
#.#.#......
##.##..##..
..#.#......
#.#.#.#....
.##.##...##
.#.#.##....
..#....#.##
......##.##
......##.##
..#....#.##
.#.#.##....

.###.####
.#..#..#.
.##.#..#.
.###.####
#...#...#
.#..#..##
#..##...#
#...#..##
#...#..##

.####.#.###
......#.#..
.......####
##..##..###
#.##.###.##
#.##.####..
#....#..###
..##..##...
#.##.#.#...
######.#.##
##..##.#...
######..#..
#.......###

###..#.##
##....#.#
####.##.#
##..##..#
##..##..#
####.##.#
##.#..#.#
###..#.##
###......
####...#.
##.#..#..
...##.##.
###......

#..#.....#..#
#....##.###..
#....##.###..
#..#.....#..#
...##.##.#..#
#..#...#.#.#.
.##.......#..
.##...##.#.#.
..#.#.###..##
.##....#.....
.#.###..##..#
###..#######.
#.###..#.#.##
.#.....##.###
#..####....##
#..#.##.#.###
#..#.##.#####

...###.
...#.#.
##...#.
..##..#
##.#.##
####...
##.###.

.##...#####..##
.###...##.##...
#.##.##.#.##...
######.##...#..
######.##...#..
#.##.##.#.##...
.###...##.##...
.##...#####..##
#.#...###.##...
.#####.#......#
...#..######...

.#..#.##..###..
..##..#.#.#####
..##..##.#.....
#....##.#.#....
#.##.#...#.##..
##..###.#####..
##..##.##..##..
.####.##.#.#.##
##..##..#.#.###
...#..#.#....##
#.##.#.###..#..
.........#.####
#.##.##..#...##

#..#.#.#..#.#.#
#..#.#..##.##.#
###.....##.....
..#...######...
.#..####..####.
....#..#..#..#.
#..#..######..#
...#..######..#
..####.#..#.###
###.####..####.
.#..##.####.##.
#......####....
#..#.###..###.#
##.##..#..#..##
#..#.##....##.#
#..#.##....##.#
##.##..#..#..##

.....######..
##....#....##
.#.#.#.#.#...
.#.#.#.#.#...
##....#....##
.....######..
#.#.#..####..
.#.#...###..#
#.#.###..##..
#..#..##.##..
..#.###......

...##...#..
##.##.###..
..####...##
.######..##
..#..#.....
..####..#..
..#..#..###
.#.##.#.###
..#..#..#..
#.#..#.#.##
.########..
..#..#.....
.######..##
.........##
#......#.##

.....#..##..#..
###...#....#...
..#####....####
####..######..#
###..#......#..
###.##.#..#.##.
...###......###
###.##......##.
#####.#.##.#.##
###..##....##..
#####...##...##
..#############
##....#.#..#...
##.##...##...##
....#........#.

...##..##..
##.#....#.#
.....##....
..########.
..#..##....
....####...
##..####..#

#####..######..##
..#......#...#.##
..########..###.#
.##########.#..#.
.....##.....#.###
#..#.##.#..##.#..
############..###
..#..##.....#....
###.#..#.###..##.
.##.#..#.##..#..#
#.##....##.#.....
####....#####.#..
####....#####.#..
#.##....##.#.....
.##.#..#.##..#..#

..##...#..#
..##......#
.#####...##
.#####...##
..##......#
..##...#..#
.#.###...#.
#...#..#.#.
#..###....#
.#.........
.###..#.#.#
#....######
#......#...
#..#.###.##
#..#.#...#.

#.##.###.#.###.#.
..##....#.###...#
#.##.#...#...##.#
.#..#.##...###.##
.#..#.##...###.##
#.##.#...#....#.#
..##....#.###...#
#.##.###.#.###.#.
##..##...##.#....
..##...######.#.#
##..##...#..##.#.
......#......##.#
#.##.#..#....#.#.

....####.#.
......#.##.
....#.#.###
#..#.#.##.#
#####.####.
....#...###
.......##..
####.#..#..
....#.#...#
####...#.##
....##.....

##......####.##.#
##..##..##....#.#
.#.####.#..#.#.#.
.########..#...#.
#.#....#.#.####.#
#.#....#.#.####.#
.########..#...##

...###...####...#
..##.##..#..#..##
..###..###..###..
..#....#..##..#..
##...#.###..###.#
.#...#..........#
##..#....#..#....
##..##.###..###.#
........#.##.#...
##..#############
###....##....##..
####...##.##.##..
..##..#.##..##.#.
....#.##..##..##.
...#.#..........#
...#.##.#....#.##
...######....####

###.#.#.###
#.#..######
#..#...##.#
#..#...##.#
#.#..######
#.#.#.#.###
#.#.#.#...#
##.#..###..
....##..#..
#.#..#.##.#
#.#..#.##.#
....##..#..
##.#..###..
#.#.#.#...#
#.#.#.#.###

....#.#..###..#
#.#.#.#####....
.####..##.#....
##..##..#......
###...###..#..#
###...#.#.#####
###...###.#####
###...###..#..#
##..##..#......
.####..##.#....
#.#.#.#####....
....#.#..###..#
#..#.#.##.#####

.#####.#.....
..#..#.#.##..
..#..#.#.#...
.#####.#.....
#..#..##...#.
#.##.#...##.#
.#.##.#...#.#
......##..###
.#.##.##...#.
.#.###.#...##
#...##..#####
.#######.###.
...#..#..####
#.#...#..####
##.###....###
.##..#.##....
.##..#.##....

#.....#..
#....####
..##.##.#
...#.##.#
#....####
#..###..#
.#.#...##
#.#####..
..#.#....
..#.#....
#.#####..
.#.#...##
#..###..#
#....####
...#.##.#
..##.##.#
#....####

#.#...#....#####.
#.......###...#..
.#......##.#..##.
.#......##.#..##.
#.......###...#..
#.#...#....#####.
##..#.......#.#.#
####...#...#.###.
###..#.####.####.
.##.#...#.#....#.
##..##....#..#.##
...#.#.#.###.#...
...#...#.###.#...

#.##########.
#...##..##...
..#.#.##.#.#.
..#...##...#.
####.#..#.###
.#..#....#..#
.....####....
###..####..##
.#.#......#.#
.##.######.##
###.######.##

#..#####.##.#.#
.##.###.###..#.
####.####.#.###
.#.....#....#.#
.##.#.###.#...#
###..#.#.##...#
###..#.#.##...#
.##.#.###.##..#
.#.....#....#.#
.#.....#....#.#
.##.#.###.##..#
###..#.#.##...#
###..#.#.##...#
.##.#.###.#...#
.#.....#....#.#

#....#.##..##.#
.##.#..........
#.###..##..##..
#..####.#..#.##
.###..######.#.
..#.#.###..###.
###....#.##.#..
#..###........#
..##....####...
##..##..####..#
....#..........
####.#.##..##.#
####.#.##..##.#
....#..........
##..##..####..#
..##....####...
#..###........#

#..#.##.#..#..##.
.....#.#...#..##.
..###.#######.##.
...##...#####....
#.#..###...######
#.#..###...######
...##...#####....
..###.##.####.##.
.....#.#...#..##.
#..#.##.#..#..##.
.#..#..###..##..#

#........
.##.#####
#....##.#
#...#.#.#
###..#.#.
###..#.#.
#...#.#.#
#....##.#
.##.##.##
#........
.....###.
##.#..#..
#.##.#..#
#.##.#..#
##.#..#..

#.##..##.
#.##..##.
...####..
#.#.##...
###....##
##.#..#.#
.#......#

..##..##.###..#
#.##.#...#.....
#.##.##..##....
######.##..####
..##..#.###....
.#..#.###...##.
.......#.#..##.
##..##....#....
#.##.#.#.#.#..#
..###..#.##.##.
#....####..#..#
.#..#...#......
..##.....##.##.
######.........
#....###.......
#.##.#####.#..#
#.##.##.##.####

#.#...###
##.###.##
.#.#.##..
.#..##.##
.#...#.##
.#.#.##..
##.###.##
#.#...###
#....#...
..#..#.##
..#..####
.###.####
#.#..#.##
..#..####
#..#...##
.#....###
.##.#.#..

.######..#.....##
.##..##......####
.##..##.##...#...
........#..##.#.#
#.####.#.#.#.##.#
.#.##.#...#.#...#
#.......#......##
.#.##.#..###..##.
###..###.#....###
#.####.#...#.#..#
........#.#.#....
..####..#.#..##..
##.##.##.#...#.#.
..####..#.##.#...
..####..#.##.#...

.###......#
.#.#...#...
.#.#...#...
.####.....#
#..#....#..
##...##..#.
##.....#.##
#.###..#.##
#.###..#.##
##.....#.##
##...##..#.

....###.#......#.
....####.#....#.#
#..#...##.####.##
#####.#.########.
#####.#..........
.....#.##......##
....#....#....#..
....###.########.
#..#...#...##...#
.##...#..#....#..
#.....#..........
.##.#...########.
....#.###......##
.....#..#..##..#.
#..##..##.####.##
#..##.##..####..#
######.#........#

##.##..
..###..
..##..#
..#####
####.##
###.##.
##.####
######.
###.#..
##.#..#
##.#...

##....##...
.#....##...
#.#########
####.#..#.#
.#.##..#.##
.#.##..#.##
####.#..#.#
#.#########
.#....##...
##....##...
.##.##..##.
.....#..#..
.....####..

.#..#..#..#..
............#
##..####..###
..##....##..#
#.########.#.
............#
.####..####.#
#....##....##
..##....##...
#....##....#.
............#
..##....##..#
.####..####.#

##.....
#####.#
.###.##
.##..##
.#.##.#
#.#.###
###.###
.#.##.#
.##..##
.###.##
#####.#
##.....
.##.###
.....#.
.....#.

###......####.##.
#..#.#..#..###.#.
#...#..#...#....#
.##..##..##.###..
.#...##...#...#..
..#......#..##..#
.#.######.#...###
#...#..#...#..#..
#..#.##.#..#.....
#..#.##.#..#.....
#...#..#...#..#..
.#.######.#...###
..#......#..##..#
.#...##...#...#..
.##..##..##.###..

###.#..#.##
..###..###.
##.######.#
##.#.##.#.#
..##.##.###
....####...
####....###
####....###
..#.#..#.#.
##.#.##.#.#
..#......#.
###..##..##
###..##..##
...#....#..
..##.##.##.
..###..###.
##.#.##.#.#

.##..#.##..##.#
####..#.####.#.
###.#.#.#..#.#.
#..#.##......##
##.#..##.##.#..
.#.##..#.##.#..
#.#..###....###
#.#..###....###
.#.##..#.##.#..

####.#.#.#.
......#....
....#..#.##
###..#..##.
.##.#.##.##
#..##...##.
#..#....#.#
.##..#.#.#.
.....#.###.
.##........
####.....#.
....######.
#..###.#.#.
#..#####.##
....#.##.#.
....##.#.##
....##.#.##

#.##.#..#.##..#.#
##.####.#..#..#..
...##.###.#.#.#..
#.#..#..##.#.##.#
####....#.###....
.##.#.###..#.##.#
...#.#..####.....
...#.#..####.....
.##.#.###..#.##.#
####....#..##....
#.#..#..##.#.##.#
...##.###.#.#.#..
##.####.#..#..#..
#.##.#..#.##..#.#
###..##.#.#.####.
..###.##.#.##.###
..###.##.#.##.###

.##......##.#
..#..##..#..#
.#........#.#
.###.##.#.#.#
###.#..#.###.
.#.##..##.#..
.##.#..#.##.#
.##.#..#.##.#
.#.##..##.#..

.#...#.#.
....#.##.
#.##.##..
.######.#
.#.##.#..
.#.##.#..
.#####..#
#..#####.
#..#####.
.#####..#
.#.##.#..
.#.##.#..
.######.#

######..#..#...
######..#..#...
.#..#...##..###
..##..#..##.#.#
..##..######..#
..##.##..####..
#.##.#...##..##

####.####..
####...####
#..#...#..#
#..#...#..#
####...####
####.####..
..#.#.##.##
#..#.##.##.
#####.#####
.....######
.##.###..#.
....#.#.#..
.##.#..#.##
.##..#.#.##
#..#..#.#..
#..###.#..#
....#..#...

..........####.
#.######.#.##.#
..#....#..#..#.
##.#.##.##....#
..#.##.#..####.
##..##..###..##
..##..##..#..#.
#.######.#.##.#
###.##.###.##.#
...####...####.
.#......#..##..
...#..#........
#...##...#.##.#
###.##.####..##
#..####..######

.###.#..#.###.##.
.#...####...#..#.
....##..##.....##
.####....##.#.###
##.###..###.##.#.
#.#.##..##.#.##.#
#.##########.#.##
#.##########.#.##
#.#.##..##.#.##.#

#.#..##..
#....##..
#.#..##..
#.#......
#..#....#
..#.####.
###.#..#.
..#..##..
#.#.#..#.

#.####..###
#.####..###
#..#.####.#
#..#..##..#
.#..#.##...
#....####..
#.....##...

###..#....#..##
###..........##
##.#.##..##.#.#
#####..##..####
...#.#.##.#.#..
..####....#####
......#..#.....
..####....####.
..#..######..#.

..##..##..##.
.........#..#
#....##..####
######.#..##.
##..#..##.##.
######..#....
##########..#
.......##.##.
#....########

###....
##..##.
.#..##.
###....
#..#.#.
#..#.##
#..#.##
#..#.#.
###....
.#..##.
##..##.
###....
......#

..##.#.
##..#.#
..##...
...#.##
.#.#.##
..#...#
..#.#.#
.#.#.##
...#.##
..##...
##..#.#
..##.#.
..##.#.

......#
##.#...
.######
##.....
..#.###
##....#
##....#
..#.###
##.....
.######
##.#...
.#....#
##.#...
#####.#
##..#..
###.##.
###.##.

.#.#.####....##..
.#.#.####....##..
...##.###...##.#.
##...##..##.###.#
##..###.##.#.###.
###.#....##.#.###
###.....#...#.#.#
###.....#...#.#.#
###.#....##.#.###
##..######.#.###.
##...##..##.###.#

.#..#......
#.##.#.#...
##..###....
.####.###..
.#..#..#.##
.....##.###
#....######
..##...####
##..##.....
.####.#.#..
##..###..##

##....#..#...
..####....###
.....#.##.#..
.....######..
..#....##....
##.#.#....#.#
..#..######..
###.#.####.#.
...#.#....#.#
###....##....
...##########
.....##..##..
..#...#..#...
..#.####.###.
..##.######.#

#...#.#.#.##.#.
...#.#..##.##..
...#.#..##.##..
#...#.#.#.##.#.
.#####..#.###..
.###..#.#..#.##
.....###.###...
#.#....####...#
######.#...#.##
.###.####..#...
.###.####..#...
######.#...#.##
#.#....####.#.#
.....###.###...
.###..#.#..#.##
.#####..#.###..
#...#.#.#.##.#.

...#..#
...#..#
....##.
#.##..#
#..####
.#.#.##
#..####

.#.##.#...#####
.##..##.##..##.
.######.#..#.##
##.##.###.##.##
.##..##.#..#...
##.##.##.#..###
#......###.#.##
.#....#.#####..
.######.##.#.##
..####..#..####
##....##.###.##
.#....#...#.###
##....###.##.##
..........#.#..
#########.#....

...#.#.##.#.#..
###.#.####.#.##
..#.##.##.##.#.
#######..######
...#...#....#..
..#..##..##..#.
###.#......#.##
######....#####
..##.#.##.#.##.
##.#...##...#.#
###..##..##..##
###.########.##
...##......##..
######....#####
###.##....##.##

##.####.##..##.##
#........#..#....
#..####..#..#..##
..#....#......#..
##......######...
##......######...
.#.####.#....#.##
#..####..#..#..##
..##..##......##.
#........####....
#..#..#..#####.#.
#.######.####.###
..##..##..##..##.
####..####..####.
.#......#....#...
###....########..
#.##..##.#..#.##.

...#...
.##....
##.##..
...#..#
#......
#......
...#..#
##.##..
.##.#..
...#...
.#..#.#
...###.
#..##.#
.##....
..##.##
#.####.
#.####.

######...#.
##########.
########..#
##..####...
.#..#.#...#
..##......#
##..###....
......#.###
##..##...##`;

// each pattern = { rows: string[], column: string[] }
function parsePatterns(input) {
  const patterns = input.split("\n\n").map((pattern) => { return { rows: pattern.split("\n") }; });
  for (const pattern of patterns) {
    pattern.columns = [];
    for (let i = 0; i < pattern.rows[0].length; i++)
      pattern.columns.push(pattern.rows.map((row) => row[i]).join(""));

    // console.log(`${pattern.rows.length}x${pattern.rows[0].length} ${pattern.columns.length}x${pattern.columns[0].length}`);
  }

  return patterns;
}

function computeDelta(a, b) {
  let delta = 0;
  for (let i = 0; i < a.length; i++)
    if (a[i] !== b[i])
      ++delta;

  return delta;
}

function findLineOfReflection(rows, requiredDelta) {
  for (let i = 1; i < rows.length; i++) {
    let a = rows[i - 1];
    let b = rows[i];
    if (a !== b)
      continue;

    let j = 1;
    let totalDelta = 0;
    while (true) {
      if (i - j === 0 || i + j === rows.length) {
        if (totalDelta === requiredDelta)
          return i;
        else
          break;
      }

      a = rows[i - 1 - j];
      b = rows[i + j];
      const delta = computeDelta(a, b);
      totalDelta += delta;
      if (delta > requiredDelta)
        break;

      j++;
    }
  }

  return undefined;
}

function part1(input) {
  const patterns = parsePatterns(input);
  // console.log(patterns);
  let total = 0;
  for (const pattern of patterns) {
    let line = findLineOfReflection(pattern.columns, 0);
    if (undefined !== line) {
      total += line;
    } else {
      line = findLineOfReflection(pattern.rows, 0);
      if (undefined === line)
        throw new Error("No line of reflection");

      total += line * 100;
    }
  }
    
  return total;
}

console.log(part1(sampleInput));
console.log(part1(realInput));
